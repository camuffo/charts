apiVersion: v1
kind: Secret
metadata:
  name: {{ include "geoserver.fullname" . }}
  labels:
    {{- include "geoserver.labels" . | nindent 4 }}
data:
  GEOSERVER_ADMIN_PASSWORD: {{ .Values.secrets.master_password | b64enc | quote }}
  POSTGIS_PASSWORD: {{ .Values.secrets.postgis_password | b64enc | quote}}
---
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "geoserver.fullname" . }}-context
data:
  context.xml: PENvbnRleHQ+CgogICAgPCEtLSBEZWZhdWx0IHNldCBvZiBtb25pdG9yZWQgcmVzb3VyY2VzIC0tPgogICAgPFdhdGNoZWRSZXNvdXJjZT5XRUItSU5GL3dlYi54bWw8L1dhdGNoZWRSZXNvdXJjZT4KCiAgICA8IS0tIFVuY29tbWVudCB0aGlzIHRvIGRpc2FibGUgc2Vzc2lvbiBwZXJzaXN0ZW5jZSBhY3Jvc3MgVG9tY2F0IHJlc3RhcnRzIC0tPgogICAgPCEtLQogICAgPE1hbmFnZXIgcGF0aG5hbWU9IiIgLz4KICAgIC0tPgoKICAgIDwhLS0gVW5jb21tZW50IHRoaXMgdG8gZW5hYmxlIENvbWV0IGNvbm5lY3Rpb24gdGFja2luZyAocHJvdmlkZXMgZXZlbnRzCiAgICAgICAgIG9uIHNlc3Npb24gZXhwaXJhdGlvbiBhcyB3ZWxsIGFzIHdlYmFwcCBsaWZlY3ljbGUpIC0tPgogICAgPCEtLQogICAgPFZhbHZlIGNsYXNzTmFtZT0ib3JnLmFwYWNoZS5jYXRhbGluYS52YWx2ZXMuQ29tZXRDb25uZWN0aW9uTWFuYWdlclZhbHZlIiAvPgogICAgLS0+CgogICAgPFJlc291cmNlCiAgICAgbmFtZT0iamRiYy9wb3N0Z3JlcyIgYXV0aD0iQ29udGFpbmVyIiB0eXBlPSJqYXZheC5zcWwuRGF0YVNvdXJjZSIKICAgICBkcml2ZXJDbGFzc05hbWU9Im9yZy5wb3N0Z3Jlc3FsLkRyaXZlciIKICAgICB1cmw9ImpkYmM6cG9zdGdyZXNxbDovL2xvY2FsaG9zdDo1NDMyL2dlb3NlcnZlciIKICAgICB1c2VybmFtZT0iZ2Vvc2VydmVyIiBwYXNzd29yZD0iZ2Vvc2VydmVyIgogICAgIGluaXRpYWxTaXplPSIwIiBtYXhBY3RpdmU9IjIwIiBtYXhJZGxlPSI1IiBtYXhXYWl0PSIyMDAwIiBtaW5JZGxlPSIwIgogICAgIHRpbWVCZXR3ZWVuRXZpY3Rpb25SdW5zTWlsbGlzPSIzMDAwMCIKICAgICBtaW5FdmljdGFibGVJZGxlVGltZU1pbGxpcz0iNjAwMDAiCiAgICAgdmFsaWRhdGlvblF1ZXJ5PSJTRUxFQ1QgMSIKICAgICBtYXhBZ2U9IjYwMDAwMCIKICAgICByb2xsYmFja09uUmV0dXJuPSJ0cnVlIgogICAgIC8+CgogICAgIDxSZXNvdXJjZQogICAgIG5hbWU9ImpkYmMvZ2VvZGIiIGF1dGg9IkNvbnRhaW5lciIgdHlwZT0iamF2YXguc3FsLkRhdGFTb3VyY2UiCiAgICAgZHJpdmVyQ2xhc3NOYW1lPSJvcmcucG9zdGdyZXNxbC5Ecml2ZXIiCiAgICAgdXJsPSJqZGJjOnBvc3RncmVzcWw6Ly9sb2NhbGhvc3Q6NTQzMi9nZW9zZXJ2ZXIiCiAgICAgdXNlcm5hbWU9Imdlb3NlcnZlciIgcGFzc3dvcmQ9Imdlb3NlcnZlciIKICAgICBpbml0aWFsU2l6ZT0iMCIgbWF4QWN0aXZlPSIyMCIgbWF4SWRsZT0iNSIgbWF4V2FpdD0iMjAwMCIgbWluSWRsZT0iMCIKICAgICB0aW1lQmV0d2VlbkV2aWN0aW9uUnVuc01pbGxpcz0iMzAwMDAiCiAgICAgbWluRXZpY3RhYmxlSWRsZVRpbWVNaWxsaXM9IjYwMDAwIgogICAgIHZhbGlkYXRpb25RdWVyeT0iU0VMRUNUIDEiCiAgICAgbWF4QWdlPSI2MDAwMDAiCiAgICAgcm9sbGJhY2tPblJldHVybj0idHJ1ZSIKICAgICAvPgo8L0NvbnRleHQ+Cgo=